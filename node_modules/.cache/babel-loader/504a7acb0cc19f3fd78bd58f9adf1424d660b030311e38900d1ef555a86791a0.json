{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\dappazon\\\\src\\\\components\\\\Product.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { ethers } from 'ethers';\n\n// Components\nimport Rating from './Rating';\nimport close from '../assets/close.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Product = _ref => {\n  _s();\n  let {\n    item,\n    provider,\n    account,\n    dappazon,\n    togglePop\n  } = _ref;\n  const [order, setOrder] = useState(null);\n  const [hasBought, setHasBought] = useState(false);\n  const fetchDetails = async () => {\n    const events = await dappazon.queryFilter(\"Buy\");\n    const orders = events.filter(event => event.args.buyer === account && event.args.itemId.toString() === item.id.toString());\n    if (orders.length === 0) return;\n    const order = await dappazon.orders(account, orders[0].args.orderId);\n    setOrder(order);\n  };\n  const buyHandler = async () => {\n    const signer = await provider.getSigner();\n\n    // Buy item...\n    let transaction = await dappazon.connect(signer).buy(item.id, {\n      value: item.cost\n    });\n    await transaction.wait();\n    setHasBought(true);\n  };\n  useEffect(() => {\n    fetchDetails();\n  }, [hasBought]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product__details\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product__image\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.image,\n          alt: \"Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product__overview\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Rating, {\n          value: item.rating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [ethers.utils.formatUnits(item.cost.toString(), 'ether'), \" ETH\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Overview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [item.description, \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima rem, iusto, consectetur inventore quod soluta quos qui assumenda aperiam, eveniet doloribus commodi error modi eaque! Iure repudiandae temporibus ex? Optio!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product__order\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [ethers.utils.formatUnits(item.cost.toString(), 'ether'), \" ETH\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"FREE delivery \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: new Date(Date.now() + 345600000).toLocaleDateString(undefined, {\n              weekday: 'long',\n              month: 'long',\n              day: 'numeric'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), item.stock > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"In Stock.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Out of Stock.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"product__buy\",\n          onClick: buyHandler,\n          children: \"Buy Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"small\", {\n            children: \"Ships from\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 14\n          }, this), \" Dappazon\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"small\", {\n            children: \"Sold by\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 14\n          }, this), \" Dappazon\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), order && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product__bought\",\n          children: [\"Item bought on \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: new Date(Number(order.time.toString() + '000')).toLocaleDateString(undefined, {\n              weekday: 'long',\n              hour: 'numeric',\n              minute: 'numeric',\n              second: 'numeric'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: togglePop,\n        className: \"product__close\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: close,\n          alt: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_s(Product, \"d6wx3FGM19eMk+ho8QwNO8YxwB4=\");\n_c = Product;\nexport default Product;\nvar _c;\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"names":["useEffect","useState","ethers","Rating","close","Product","item","provider","account","dappazon","togglePop","order","setOrder","hasBought","setHasBought","fetchDetails","events","queryFilter","orders","filter","event","args","buyer","itemId","toString","id","length","orderId","buyHandler","signer","getSigner","transaction","connect","buy","value","cost","wait","image","name","rating","address","utils","formatUnits","description","Date","now","toLocaleDateString","undefined","weekday","month","day","stock","Number","time","hour","minute","second"],"sources":["C:/Users/LENOVO/dappazon/src/components/Product.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { ethers } from 'ethers'\r\n\r\n// Components\r\nimport Rating from './Rating'\r\n\r\nimport close from '../assets/close.svg'\r\n\r\nconst Product = ({ item, provider, account, dappazon, togglePop }) => {\r\n  const [order, setOrder] = useState(null)\r\n  \r\n  const [hasBought, setHasBought] = useState(false)\r\n\r\n  const fetchDetails = async () => {\r\n    const events = await dappazon.queryFilter(\"Buy\")\r\n    const orders = events.filter(\r\n      (event) => event.args.buyer === account && event.args.itemId.toString() === item.id.toString()\r\n    )\r\n\r\n    if (orders.length === 0) return\r\n\r\n    const order = await dappazon.orders(account, orders[0].args.orderId)\r\n    setOrder(order)\r\n  }\r\n\r\n  const buyHandler = async () => {\r\n    const signer = await provider.getSigner()\r\n\r\n    // Buy item...\r\n    let transaction = await dappazon.connect(signer).buy(item.id, { value: item.cost })\r\n    await transaction.wait()\r\n\r\n    setHasBought(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchDetails()\r\n  }, [hasBought])\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      <div className=\"product__details\">\r\n        <div className=\"product__image\">\r\n          <img src={item.image} alt=\"Product\" />\r\n        </div>\r\n        <div className=\"product__overview\">\r\n          <h1>{item.name}</h1>\r\n\r\n          <Rating value={item.rating} />\r\n\r\n          <hr />\r\n\r\n          <p>{item.address}</p>\r\n\r\n          <h2>{ethers.utils.formatUnits(item.cost.toString(), 'ether')} ETH</h2>\r\n\r\n          <hr />\r\n\r\n          <h2>Overview</h2>\r\n\r\n          <p>\r\n            {item.description}\r\n\r\n            Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima rem, iusto,\r\n            consectetur inventore quod soluta quos qui assumenda aperiam, eveniet doloribus\r\n            commodi error modi eaque! Iure repudiandae temporibus ex? Optio!\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"product__order\">\r\n          <h1>{ethers.utils.formatUnits(item.cost.toString(), 'ether')} ETH</h1>\r\n\r\n          <p>\r\n            FREE delivery <br />\r\n            <strong>\r\n              {new Date(Date.now() + 345600000).toLocaleDateString(undefined, { weekday: 'long', month: 'long', day: 'numeric' })}\r\n            </strong>\r\n          </p>\r\n\r\n          {item.stock > 0 ? (\r\n            <p>In Stock.</p>\r\n          ) : (\r\n            <p>Out of Stock.</p>\r\n          )}\r\n\r\n          <button className='product__buy' onClick={buyHandler}>\r\n            Buy Now\r\n          </button>\r\n\r\n          <p><small>Ships from</small> Dappazon</p>\r\n          <p><small>Sold by</small> Dappazon</p>\r\n\r\n          {order && (\r\n            <div className='product__bought'>\r\n              Item bought on <br />\r\n              <strong>\r\n                {new Date(Number(order.time.toString() + '000')).toLocaleDateString(\r\n                  undefined,\r\n                  {\r\n                    weekday: 'long',\r\n                    hour: 'numeric',\r\n                    minute: 'numeric',\r\n                    second: 'numeric'\r\n                  })}\r\n              </strong>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n\r\n        <button onClick={togglePop} className=\"product__close\">\r\n          <img src={close} alt=\"Close\" />\r\n        </button>\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default Product;\r\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,MAAM,QAAQ,QAAQ;;AAE/B;AACA,OAAOC,MAAM,MAAM,UAAU;AAE7B,OAAOC,KAAK,MAAM,qBAAqB;AAAA;AAEvC,MAAMC,OAAO,GAAG,QAAsD;EAAA;EAAA,IAArD;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,OAAO;IAAEC,QAAQ;IAAEC;EAAU,CAAC;EAC/D,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAM,CAACY,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAEjD,MAAMc,YAAY,GAAG,YAAY;IAC/B,MAAMC,MAAM,GAAG,MAAMP,QAAQ,CAACQ,WAAW,CAAC,KAAK,CAAC;IAChD,MAAMC,MAAM,GAAGF,MAAM,CAACG,MAAM,CACzBC,KAAK,IAAKA,KAAK,CAACC,IAAI,CAACC,KAAK,KAAKd,OAAO,IAAIY,KAAK,CAACC,IAAI,CAACE,MAAM,CAACC,QAAQ,EAAE,KAAKlB,IAAI,CAACmB,EAAE,CAACD,QAAQ,EAAE,CAC/F;IAED,IAAIN,MAAM,CAACQ,MAAM,KAAK,CAAC,EAAE;IAEzB,MAAMf,KAAK,GAAG,MAAMF,QAAQ,CAACS,MAAM,CAACV,OAAO,EAAEU,MAAM,CAAC,CAAC,CAAC,CAACG,IAAI,CAACM,OAAO,CAAC;IACpEf,QAAQ,CAACD,KAAK,CAAC;EACjB,CAAC;EAED,MAAMiB,UAAU,GAAG,YAAY;IAC7B,MAAMC,MAAM,GAAG,MAAMtB,QAAQ,CAACuB,SAAS,EAAE;;IAEzC;IACA,IAAIC,WAAW,GAAG,MAAMtB,QAAQ,CAACuB,OAAO,CAACH,MAAM,CAAC,CAACI,GAAG,CAAC3B,IAAI,CAACmB,EAAE,EAAE;MAAES,KAAK,EAAE5B,IAAI,CAAC6B;IAAK,CAAC,CAAC;IACnF,MAAMJ,WAAW,CAACK,IAAI,EAAE;IAExBtB,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC;EAEDd,SAAS,CAAC,MAAM;IACde,YAAY,EAAE;EAChB,CAAC,EAAE,CAACF,SAAS,CAAC,CAAC;EAEf,oBACE;IAAK,SAAS,EAAC,SAAS;IAAA,uBACtB;MAAK,SAAS,EAAC,kBAAkB;MAAA,wBAC/B;QAAK,SAAS,EAAC,gBAAgB;QAAA,uBAC7B;UAAK,GAAG,EAAEP,IAAI,CAAC+B,KAAM;UAAC,GAAG,EAAC;QAAS;UAAA;UAAA;UAAA;QAAA;MAAG;QAAA;QAAA;QAAA;MAAA,QAClC,eACN;QAAK,SAAS,EAAC,mBAAmB;QAAA,wBAChC;UAAA,UAAK/B,IAAI,CAACgC;QAAI;UAAA;UAAA;UAAA;QAAA,QAAM,eAEpB,QAAC,MAAM;UAAC,KAAK,EAAEhC,IAAI,CAACiC;QAAO;UAAA;UAAA;UAAA;QAAA,QAAG,eAE9B;UAAA;UAAA;UAAA;QAAA,QAAM,eAEN;UAAA,UAAIjC,IAAI,CAACkC;QAAO;UAAA;UAAA;UAAA;QAAA,QAAK,eAErB;UAAA,WAAKtC,MAAM,CAACuC,KAAK,CAACC,WAAW,CAACpC,IAAI,CAAC6B,IAAI,CAACX,QAAQ,EAAE,EAAE,OAAO,CAAC;QAAA;UAAA;UAAA;UAAA;QAAA,QAAU,eAEtE;UAAA;UAAA;UAAA;QAAA,QAAM,eAEN;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAiB,eAEjB;UAAA,WACGlB,IAAI,CAACqC,WAAW;QAAA;UAAA;UAAA;UAAA;QAAA,QAKf;MAAA;QAAA;QAAA;QAAA;MAAA,QACA,eAEN;QAAK,SAAS,EAAC,gBAAgB;QAAA,wBAC7B;UAAA,WAAKzC,MAAM,CAACuC,KAAK,CAACC,WAAW,CAACpC,IAAI,CAAC6B,IAAI,CAACX,QAAQ,EAAE,EAAE,OAAO,CAAC;QAAA;UAAA;UAAA;UAAA;QAAA,QAAU,eAEtE;UAAA,0CACgB;YAAA;YAAA;YAAA;UAAA,QAAM,eACpB;YAAA,UACG,IAAIoB,IAAI,CAACA,IAAI,CAACC,GAAG,EAAE,GAAG,SAAS,CAAC,CAACC,kBAAkB,CAACC,SAAS,EAAE;cAAEC,OAAO,EAAE,MAAM;cAAEC,KAAK,EAAE,MAAM;cAAEC,GAAG,EAAE;YAAU,CAAC;UAAC;YAAA;YAAA;YAAA;UAAA,QAC5G;QAAA;UAAA;UAAA;UAAA;QAAA,QACP,EAEH5C,IAAI,CAAC6C,KAAK,GAAG,CAAC,gBACb;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAgB,gBAEhB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QACD,eAED;UAAQ,SAAS,EAAC,cAAc;UAAC,OAAO,EAAEvB,UAAW;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAE5C,eAET;UAAA,wBAAG;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAAyB;QAAA;UAAA;UAAA;UAAA;QAAA,QAAa,eACzC;UAAA,wBAAG;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAAsB;QAAA;UAAA;UAAA;UAAA;QAAA,QAAa,EAErCjB,KAAK,iBACJ;UAAK,SAAS,EAAC,iBAAiB;UAAA,2CACf;YAAA;YAAA;YAAA;UAAA,QAAM,eACrB;YAAA,UACG,IAAIiC,IAAI,CAACQ,MAAM,CAACzC,KAAK,CAAC0C,IAAI,CAAC7B,QAAQ,EAAE,GAAG,KAAK,CAAC,CAAC,CAACsB,kBAAkB,CACjEC,SAAS,EACT;cACEC,OAAO,EAAE,MAAM;cACfM,IAAI,EAAE,SAAS;cACfC,MAAM,EAAE,SAAS;cACjBC,MAAM,EAAE;YACV,CAAC;UAAC;YAAA;YAAA;YAAA;UAAA,QACG;QAAA;UAAA;UAAA;UAAA;QAAA,QAEZ;MAAA;QAAA;QAAA;QAAA;MAAA,QACG,eAGN;QAAQ,OAAO,EAAE9C,SAAU;QAAC,SAAS,EAAC,gBAAgB;QAAA,uBACpD;UAAK,GAAG,EAAEN,KAAM;UAAC,GAAG,EAAC;QAAO;UAAA;UAAA;UAAA;QAAA;MAAG;QAAA;QAAA;QAAA;MAAA,QACxB;IAAA;MAAA;MAAA;MAAA;IAAA;EACL;IAAA;IAAA;IAAA;EAAA,QACD;AAEX,CAAC;AAAA,GA5GKC,OAAO;AAAA,KAAPA,OAAO;AA8Gb,eAAeA,OAAO;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}